(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5050,7670,e=>{"use strict";var t=e.i(43476);function a(){for(var e,t,a=0,s="",r=arguments.length;a<r;a++)(e=arguments[a])&&(t=function e(t){var a,s,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var l=t.length;for(a=0;a<l;a++)t[a]&&(s=e(t[a]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}(e))&&(s&&(s+=" "),s+=t);return s}e.s(["clsx",()=>a],7670);var s=e.i(19056);function r(...e){return(0,s.twMerge)(a(e))}function l({className:e,children:a,...s}){return(0,t.jsx)("div",{className:r("bg-white rounded-2xl border border-slate-200 shadow-sm",e),...s,children:a})}function n({className:e,children:a,...s}){return(0,t.jsx)("div",{className:r("p-6 pb-2",e),...s,children:a})}function i({className:e,children:a,...s}){return(0,t.jsx)("h3",{className:r("text-lg font-bold text-slate-900",e),...s,children:a})}function o({className:e,children:a,...s}){return(0,t.jsx)("div",{className:r("p-6 pt-2",e),...s,children:a})}e.s(["Card",()=>l,"CardContent",()=>o,"CardHeader",()=>n,"CardTitle",()=>i],5050)},4421,e=>{"use strict";let t,a,s;var r=e.i(71645);let l=e=>{let t,a=new Set,s=(e,s)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=s?s:"object"!=typeof r||null===r)?r:Object.assign({},t,r),a.forEach(a=>a(t,e))}},r=()=>t,l={setState:s,getState:r,getInitialState:()=>n,subscribe:e=>(a.add(e),()=>a.delete(e))},n=t=e(s,r,l);return l},n=e=>{let t=e?l(e):l,a=e=>(function(e,t=e=>e){let a=r.default.useSyncExternalStore(e.subscribe,r.default.useCallback(()=>t(e.getState()),[e,t]),r.default.useCallback(()=>t(e.getInitialState()),[e,t]));return r.default.useDebugValue(a),a})(t,e);return Object.assign(a,t),a};function i(e,t){let a;try{a=e()}catch(e){return}return{getItem:e=>{var s;let r=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),l=null!=(s=a.getItem(e))?s:null;return l instanceof Promise?l.then(r):r(l)},setItem:(e,s)=>a.setItem(e,JSON.stringify(s,null==t?void 0:t.replacer)),removeItem:e=>a.removeItem(e)}}let o=e=>t=>{try{let a=e(t);if(a instanceof Promise)return a;return{then:e=>o(e)(a),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>o(t)(e)}}},c=(t?n(t):n)((a=(e,t)=>({cash:1e7,initialCapital:1e7,holdings:[],transactions:[],assetHistory:[],buyStock:(a,s)=>{let{cash:r,holdings:l,transactions:n}=t(),i=a.price*s;if(i>r)return void alert("資金不足です！");let o=l.find(e=>e.code===a.code),c=[...l];if(o){let e=o.quantity+s,t=(o.averagePrice*o.quantity+i)/e;c=c.map(s=>s.code===a.code?{...s,quantity:e,averagePrice:t,currentPrice:a.price}:s)}else c.push({code:a.code,name:a.name,quantity:s,averagePrice:a.price,currentPrice:a.price});let d={id:Math.random().toString(36).substring(7),date:new Date().toISOString(),code:a.code,name:a.name,type:"buy",quantity:s,price:a.price,total:i};e({cash:r-i,holdings:c,transactions:[d,...n]}),t().recordHistory()},sellStock:(a,s)=>{let{cash:r,holdings:l,transactions:n}=t(),i=l.find(e=>e.code===a.code);if(!i||i.quantity<s)return void alert("保有数が不足しています！");let o=a.price*s,c=[...l];c=i.quantity===s?c.filter(e=>e.code!==a.code):c.map(e=>e.code===a.code?{...e,quantity:e.quantity-s,currentPrice:a.price}:e);let d={id:Math.random().toString(36).substring(7),date:new Date().toISOString(),code:a.code,name:a.name,type:"sell",quantity:s,price:a.price,total:o};e({cash:r+o,holdings:c,transactions:[d,...n]}),t().recordHistory()},resetGame:()=>{e({cash:1e7,holdings:[],transactions:[],assetHistory:[]})},recordHistory:()=>{let{cash:a,holdings:s,assetHistory:r}=t(),l=s.reduce((e,t)=>e+t.currentPrice*t.quantity,0);new Date().toISOString().split("T")[0],e({assetHistory:[...r,{date:new Date().toISOString(),totalAssets:a+l,cash:a,stockValue:l}]})}}),s={name:"stock-game-storage",storage:i(()=>localStorage)},(e,t,r)=>{let l,n={storage:i(()=>window.localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...s},c=!1,d=0,u=new Set,m=new Set,x=n.storage;if(!x)return a((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),e(...t)},t,r);let h=()=>{let e=n.partialize({...t()});return x.setItem(n.name,{state:e,version:n.version})},f=r.setState;r.setState=(e,t)=>(f(e,t),h());let b=a((...t)=>(e(...t),h()),t,r);r.getInitialState=()=>b;let p=()=>{var a,s;if(!x)return;let r=++d;c=!1,u.forEach(e=>{var a;return e(null!=(a=t())?a:b)});let i=(null==(s=n.onRehydrateStorage)?void 0:s.call(n,null!=(a=t())?a:b))||void 0;return o(x.getItem.bind(x))(n.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];else{if(n.migrate){let t=n.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(a=>{var s;if(r!==d)return;let[i,o]=a;if(e(l=n.merge(o,null!=(s=t())?s:b),!0),i)return h()}).then(()=>{r===d&&(null==i||i(l,void 0),l=t(),c=!0,m.forEach(e=>e(l)))}).catch(e=>{r===d&&(null==i||i(void 0,e))})};return r.persist={setOptions:e=>{n={...n,...e},e.storage&&(x=e.storage)},clearStorage:()=>{null==x||x.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>p(),hasHydrated:()=>c,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(m.add(e),()=>{m.delete(e)})},n.skipHydration||p(),l||b}));e.s(["useGameStore",0,c],4421)},61333,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(5050),r=e.i(75254);let l=(0,r.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var n=e.i(25652);let i=(0,r.default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),o=(0,r.default)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var c=e.i(4421);let d=(0,r.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function u(e){let t=e.split("").reduce((e,t)=>e+t.charCodeAt(0),0),a=(t%90+10)*100,s=Math.floor(Date.now()/6e4),r=a+(Math.sin(t+s)+1)/2*a*.05,l=new Date,n=(r=Math.floor(r=a*(1+.03*Math.sin(t+(1e4*l.getFullYear()+(l.getMonth()+1)*100+l.getDate())))*(1+.01*Math.sin(.1*s+t))))-a,i=parseFloat((n/a*100).toFixed(2));return{price:r,change:n,changePercent:i}}function m({stock:e,isOpen:s,onClose:r}){let[l,n]=(0,a.useState)(100),[i,o]=(0,a.useState)("buy"),[m,x]=(0,a.useState)(e.price||0),{cash:h,holdings:f,buyStock:b,sellStock:p}=(0,c.useGameStore)(),[g,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{s&&y()},[s,e.code]);let y=async()=>{v(!0),await new Promise(e=>setTimeout(e,300)),x(u(e.code).price),v(!1)};if(!s)return null;let j=m*l,w=f.find(t=>t.code===e.code),N=w?w.quantity:0;return(0,t.jsx)("div",{className:"fixed inset-0 bg-slate-900/20 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden border border-slate-100 animate-in fade-in zoom-in-95 duration-200",children:[(0,t.jsxs)("div",{className:"p-6 bg-slate-50 border-b border-slate-100 flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-mono text-slate-500",children:e.code}),(0,t.jsx)("h3",{className:"text-xl font-bold text-slate-800",children:e.name})]}),(0,t.jsx)("button",{onClick:r,className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:(0,t.jsx)(d,{size:20,className:"text-slate-500"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-center items-center space-x-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"現在株価"}),(0,t.jsx)("p",{className:"text-3xl font-bold font-mono text-slate-900",children:g?"...":`\xa5${m.toLocaleString()}`})]})}),(0,t.jsxs)("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[(0,t.jsx)("button",{onClick:()=>o("buy"),className:`flex-1 py-2 rounded-lg font-bold transition-all ${"buy"===i?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"購入 (Buy)"}),(0,t.jsx)("button",{onClick:()=>o("sell"),className:`flex-1 py-2 rounded-lg font-bold transition-all ${"sell"===i?"bg-white text-red-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"売却 (Sell)"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1 text-slate-600",children:"数量 (株)"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>n(Math.max(100,l-100)),className:"px-4 py-3 bg-slate-100 rounded-xl hover:bg-slate-200 font-bold text-slate-600",children:"-"}),(0,t.jsx)("input",{type:"number",value:l,onChange:e=>n(Math.max(0,parseInt(e.target.value)||0)),className:"flex-1 text-center py-3 bg-slate-50 border border-slate-200 rounded-xl font-mono text-lg outline-none focus:ring-2 focus:ring-blue-500"}),(0,t.jsx)("button",{onClick:()=>n(l+100),className:"px-4 py-3 bg-slate-100 rounded-xl hover:bg-slate-200 font-bold text-slate-600",children:"+"})]})]}),(0,t.jsxs)("div",{className:"bg-slate-50 p-4 rounded-xl space-y-2 text-sm border border-slate-100",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-slate-600",children:"概算約定代金"}),(0,t.jsxs)("span",{className:"font-bold text-slate-900",children:["¥ ",j.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-slate-500",children:[(0,t.jsx)("span",{children:"buy"===i?"買付余力":"保有株数"}),(0,t.jsx)("span",{children:"buy"===i?`\xa5 ${h.toLocaleString()}`:`${N} 株`})]})]}),(0,t.jsx)("button",{onClick:()=>{if("buy"===i){if(j>h)return void alert("資金が不足しています");b({...e,price:m},l)}else{if(l>N)return void alert("保有株数が不足しています");p({...e,price:m},l)}r()},disabled:g||("buy"===i?j>h:l>N),className:`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed
                    ${"buy"===i?"bg-blue-600 hover:bg-blue-700 shadow-blue-200":"bg-red-600 hover:bg-red-700 shadow-red-200"}
                `,children:"buy"===i?"注文する (購入)":"注文する (売却)"})]})]})]})})}let x=[{code:"7203",name:"トヨタ自動車"},{code:"6758",name:"ソニーグループ"},{code:"9984",name:"ソフトバンクグループ"},{code:"9983",name:"ファーストリテイリング"},{code:"8035",name:"東京エレクトロン"},{code:"6861",name:"キーエンス"},{code:"6098",name:"リクルート"},{code:"9432",name:"日本電信電話"},{code:"7974",name:"任天堂"},{code:"8058",name:"三菱商事"},{code:"8316",name:"三井住友フィナンシャルグループ"},{code:"8306",name:"三菱UFJフィナンシャル・グループ"},{code:"6501",name:"日立製作所"},{code:"6367",name:"ダイキン工業"},{code:"4063",name:"信越化学工業"},{code:"4502",name:"武田薬品工業"},{code:"7741",name:"HOYA"},{code:"6902",name:"デンソー"},{code:"6273",name:"SMC"},{code:"6954",name:"ファナック"}];function h(){let[e,r]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[h,f]=(0,a.useState)(""),[b,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{g()},[]);let g=async()=>{d(!0);try{let e=x.map(e=>{let t=u(e.code);return{...e,...t}});r(e)}catch(e){console.error(e)}finally{d(!1)}},v=e.filter(e=>e.name.includes(h)||e.code.includes(h));return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"株式市場"}),(0,t.jsx)("p",{className:"text-slate-500",children:"リアルタイムでの取引が可能です (日本株のみ)"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 w-full md:w-auto",children:[(0,t.jsxs)("div",{className:"relative flex-1 md:w-64",children:[(0,t.jsx)(l,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),(0,t.jsx)("input",{type:"text",placeholder:"銘柄名・コードで検索",className:"w-full pl-10 pr-4 py-2 rounded-xl bg-white border border-slate-200 outline-none focus:ring-2 focus:ring-blue-500 text-slate-700",value:h,onChange:e=>f(e.target.value)})]}),(0,t.jsx)("button",{onClick:g,className:"p-2 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 transition-colors shadow-sm",title:"更新",children:(0,t.jsx)(o,{className:`h-5 w-5 text-slate-600 ${c?"animate-spin":""}`})})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(e=>(0,t.jsx)(s.Card,{className:"hover:shadow-md transition-shadow cursor-pointer border-l-4 border-l-transparent hover:border-l-blue-500 overflow-hidden bg-white",children:(0,t.jsxs)(s.CardContent,{className:"p-5",onClick:()=>p(e),children:[(0,t.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,t.jsx)("span",{className:"text-xs font-mono bg-slate-100 px-2 py-1 rounded text-slate-600 border border-slate-200",children:e.code})}),(0,t.jsx)("h3",{className:"font-bold text-lg truncate mb-4 text-slate-800",children:e.name}),(0,t.jsxs)("div",{className:"flex justify-between items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"現在値"}),(0,t.jsx)("p",{className:"text-xl font-bold font-mono text-slate-900",children:e.price?`\xa5${e.price.toLocaleString()}`:"-"})]}),(0,t.jsxs)("div",{className:`text-right ${e.change&&e.change>=0?"text-red-500":"text-green-500"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-1",children:[e.change&&e.change>=0?(0,t.jsx)(n.TrendingUp,{size:16}):(0,t.jsx)(i,{size:16}),(0,t.jsxs)("span",{className:"font-bold",children:[e.changePercent,"%"]})]}),(0,t.jsxs)("p",{className:"text-xs",children:[e.change&&e.change>0?"+":"",e.change]})]})]})]})},e.code))}),b&&(0,t.jsx)(m,{stock:b,isOpen:!!b,onClose:()=>p(null)})]})}e.s(["default",()=>h],61333)}]);